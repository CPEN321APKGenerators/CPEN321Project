version: "3.1"

intents:
  - greet
  - goodbye
  - affirm
  - deny
  - journal_provided
  - start

entities:
  - date
  - userID
  - google_token
  - message

slots:
  date:
    type: text
    mappings:
      - type: from_entity
        entity: date
      - type: from_trigger_intent  # Captures from frontend API call
        intent: journal_provided
        value: "{date}"

  userID:
    type: text
    mappings:
      - type: from_entity
        entity: userID
      - type: from_trigger_intent  # Captures from frontend API call
        intent: journal_provided
        value: "{userID}"

  google_token:
    type: text
    mappings:
      - type: from_entity
        entity: google_token
      - type: from_trigger_intent  # Captures from frontend API call
        intent: journal_provided
        value: "{google_token}"

  message:
    type: text
    mappings:
      - type: from_entity
        entity: message
      - type: from_text  # Captures directly from user message

responses:
  utter_greet:
    - text: "Hi! Ready to journal?"
  utter_ask_journal:
    - text: "Type your journal entry below."
  utter_goodbye:
    - text: "See you tomorrow!"
  utter_journal_confirmation:
    - text: "Your journal entry has been saved!"
  utter_journal_follow_up:
    - text: "Would you like to add anything else?"
  utter_ask_continue:
    - text: "Do you want to continue journaling?"
  utter_out_of_scope:
    - text: "Sorry, I can only assist with journaling."

actions:
  - action_save_message

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
